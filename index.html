<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì‹¸U ì…€í”„ ì •ì‚° ì£¼ë¬¸ì„œ</title>

<!-- ë‹¤ìŒ ì£¼ì†Œ ê²€ìƒ‰ -->
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", sans-serif;
  background: #f5f5f5;
  margin: 0;
  padding: 16px;
}

.container {
  background: #fff;
  border-radius: 12px;
  padding: 16px;
  max-width: 480px;
  margin: auto;
}

h2 {
  color: #1e88e5;
  margin-bottom: 8px;
}

.section-title {
  font-weight: bold;
  font-size: 16px;
  margin: 16px 0 8px;
  color: #000;
}

hr {
  border: none;
  border-top: 1px solid #ddd;
  margin: 12px 0;
}

input {
  width: 100%;
  padding: 10px;
  margin-bottom: 8px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.row {
  display: flex;
  gap: 8px;
}

button {
  padding: 12px;
  border-radius: 10px;
  border: none;
  font-weight: bold;
  cursor: pointer;
}

.btn-blue {
  background: #1e88e5;
  color: #fff;
}

.btn-gray {
  background: #e0e0e0;
  color: #000;
}

.btn-red {
  background: #f8d7da;
  color: #000;
}

.btn-row {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.btn-row button {
  flex: 1;
}

.total {
  font-size: 18px;
  font-weight: bold;
  color: #1e88e5;
  margin-top: 12px;
}

.copy-box {
  background: #f1f1f1;
  padding: 12px;
  border-radius: 8px;
  white-space: pre-line;
  font-size: 14px;
}
</style>
</head>

<body>
<div class="container">

<h2>ì‹¸U ì…€í”„ ì •ì‚° ì£¼ë¬¸ì„œ</h2>

<div class="section-title">ê³ ê° ì •ë³´</div>
<hr>

<div class="row">
  <input id="nickname" placeholder="ë‹‰ë„¤ì„" />
  <input id="name" placeholder="ì´ë¦„" />
</div>

<input id="phone" placeholder="ì—°ë½ì²˜" />

<div class="row">
  <input id="address" placeholder="ì£¼ì†Œ" readonly />
  <button class="btn-gray" onclick="searchAddress()">ì£¼ì†Œê²€ìƒ‰</button>
</div>

<input id="detailAddress" placeholder="ìƒì„¸ì£¼ì†Œ" />

<div class="section-title">ìƒí’ˆ ì •ë³´</div>
<hr>

<div id="productList"></div>

<div class="btn-row">
  <button class="btn-blue" onclick="addProduct()">+ ìƒí’ˆì¶”ê°€</button>
  <button class="btn-gray" onclick="clearProducts()">- ìƒí’ˆëª©ë¡ ì‚­ì œ</button>
</div>

<div class="total">ì´ ê²°ì œê¸ˆì•¡: <span id="totalPrice">0</span>ì›</div>

<div class="section-title">ì…ê¸ˆê³„ì¢Œ</div>
<div class="copy-box">
ì¹´ì¹´ì˜¤ë±…í¬ 3333-09797-1111  
ìœ í˜œì •(ìœ ì„¸ì—°)
</div>

<div class="btn-row">
  <button class="btn-gray" onclick="showConfirm()">ì£¼ë¬¸ì„œ í™•ì¸</button>
  <button class="btn-blue" onclick="completeOrder()">ì£¼ë¬¸ ì™„ë£Œ</button>
</div>

<div id="confirmArea" style="display:none; margin-top:12px;">
  <div class="copy-box" id="confirmText"></div>
  <button class="btn-blue" style="margin-top:8px;" onclick="copyConfirm()">ğŸ“‹ ì£¼ë¬¸ë‚´ìš© ë³µì‚¬</button>
</div>

</div>

<script>
/* ---------- ê³ ê°ì •ë³´ ìë™ ì €ì¥ ---------- */
const fields = ["nickname","name","phone","address","detailAddress"];
fields.forEach(id=>{
  const el = document.getElementById(id);
  el.value = localStorage.getItem(id) || "";
  el.addEventListener("input",()=>localStorage.setItem(id, el.value));
});

/* ---------- ìƒí’ˆ ---------- */
let products = [];

function addProduct() {
  products.push({name:"", price:0});
  renderProducts();
}

function clearProducts() {
  products = [];
  renderProducts();
  updateTotal();
}

function renderProducts() {
  const list = document.getElementById("productList");
  list.innerHTML = "";
  products.forEach((p,i)=>{
    list.innerHTML += `
      <div class="row">
        <input placeholder="ìƒí’ˆëª…" oninput="products[${i}].name=this.value">
        <input placeholder="ê¸ˆì•¡" type="number" oninput="products[${i}].price=Number(this.value);updateTotal()">
      </div>`;
  });
}

function updateTotal() {
  const total = products.reduce((s,p)=>s+p.price,0);
  document.getElementById("totalPrice").innerText = total.toLocaleString();
}

/* ---------- ì£¼ì†Œ ê²€ìƒ‰ ---------- */
function searchAddress() {
  new daum.Postcode({
    oncomplete: function(data) {
      document.getElementById("address").value = data.address;
      localStorage.setItem("address", data.address);
    }
  }).open();
}

/* ---------- ì£¼ë¬¸ í™•ì¸ ---------- */
function showConfirm() {
  const text = `
[ì‹¸U ì£¼ë¬¸í™•ì¸]

ë‹‰ë„¤ì„: ${nickname.value}
ì´ë¦„: ${name.value}
ì—°ë½ì²˜: ${phone.value}
ì£¼ì†Œ: ${address.value} ${detailAddress.value}

ìƒí’ˆ:
${products.map(p=>`- ${p.name} / ${p.price.toLocaleString()}ì›`).join("\n")}

ì´ ê²°ì œê¸ˆì•¡: ${totalPrice.innerText}ì›

ì…ê¸ˆê³„ì¢Œ:
ì¹´ì¹´ì˜¤ë±…í¬ 3333-09797-1111
ìœ í˜œì •(ìœ ì„¸ì—°)
`;
  confirmText.innerText = text.trim();
  confirmArea.style.display = "block";
}

function copyConfirm() {
  navigator.clipboard.writeText(confirmText.innerText);
  alert("ì£¼ë¬¸ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤");
}

function completeOrder() {
  alert("ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤");
}
</script>
</body>
</html>
